<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Webstreak main page</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script>
        $(function(e){

            $("#submit_message").on("click", function(e) {
                //sms text
                var text = $("#message_input").val();
                //should be hardcoded somewhere on webstreak page
                var toNumber =  $(".sms-button-webstreak-1").attr("data-number");
                //should be filled by end user
                var fromNumber = $("#from_number_input").val();

                //carcode api to send sms to a webstreak
                //
                $.ajax({
                    url:"https://www.carcode.com/carcode/v1/dealer/sms",
                    type: "POST",
                    data: "From="+ encodeURIComponent(fromNumber) +
                    "&To=" + encodeURIComponent(toNumber) + "&Body=" + encodeURIComponent(text) + "&make=car_make&model=car_model&year=2017&vin=123231xwr12",
                    success: onAjaxSuccess
                })
            });



            function onAjaxSuccess() {
                $("#modal").modal("hide");
            }
        });

    </script>

</head>
<body>
<div class="col-md-12">
    <h1 class="page-header">Webstreak page</h1>
</div>
<div class="col-md-12">
    <div class="panel panel-info">
        <div class="panel-heading">
            <label>Webstreak models</label>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-5">
                    <img style="width:400px" src="http://media.ed.edmunds-media.com/bmw/4-series/2017/oem/2017_bmw_4-series_coupe_440i_fq_oem_9_717.jpg">
                </div>
                <div class="col-md-7">
                    <span><h4>Lorem Ipsum</h4>

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce quis lacus tempor, finibus ipsum eget, congue ipsum. Cras tristique malesuada fringilla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras volutpat suscipit ligula, accumsan varius enim eleifend ut. In at semper lacus. Phasellus volutpat purus sed mauris gravida facilisis. In sed enim enim. Donec dignissim porttitor magna, sit amet consectetur quam placerat sed. Vestibulum consectetur placerat lorem et lobortis. Vestibulum tincidunt purus at lectus blandit, quis tincidunt nibh vestibulum.</span>
                    <br><br>

                    <a
                       data-number="+16264145621"
                       data-toggle="modal" href="#modal"
                       class="sms-button-webstreak-1 btn-info btn">Text Webstreak</a>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="modal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Text with Webstreak</h4>
            </div>
            <div class="modal-body">
                <p>Please, leave a message for Webstreak</p>
                <div>
                    Your phone number
                    <input id="from_number_input"
                           placeholder="+15551981781"
                           class="form-control">
                </div>
                <div>
                    Your message
                    <textarea id="message_input"
                              placeholder="Your message"
                              class="form-control"
                              rows="5"></textarea>
                </div>
            </div>

            <div class="modal-footer">
                <button id="submit_message" type="button" class="btn btn-default">Submit</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>